!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){var t=Array.prototype.slice,n=Array.prototype.splice,a={topSpacing:0,bottomSpacing:0,className:"is-sticky",wrapperClassName:"sticky-wrapper",center:!1,getWidthFrom:"",widthFromWrapper:!0,responsiveWidth:!1},i=e(window),l=e(document),s=[],o=i.height(),r=function(){for(var t=i.scrollTop(),n=l.height(),a=n-o,r=t>a?a-t:0,c=0,p=s.length;c<p;c++){var d=s[c],u=d.stickyWrapper.offset().top,h=u-d.topSpacing-r;if(d.stickyWrapper.css("height",d.stickyElement.outerHeight()),t<=h)null!==d.currentTop&&(d.stickyElement.css({width:"",position:"",top:""}),d.stickyElement.parent().removeClass(d.className),d.stickyElement.trigger("sticky-end",[d]),d.currentTop=null);else{var m=n-d.stickyElement.outerHeight()-d.topSpacing-d.bottomSpacing-t-r;if(m<0?m+=d.topSpacing:m=d.topSpacing,d.currentTop!==m){var f;d.getWidthFrom?f=e(d.getWidthFrom).width()||null:d.widthFromWrapper&&(f=d.stickyWrapper.width()),null==f&&(f=d.stickyElement.width()),d.stickyElement.css("width",f).css("position","fixed").css("top",m),d.stickyElement.parent().addClass(d.className),null===d.currentTop?d.stickyElement.trigger("sticky-start",[d]):d.stickyElement.trigger("sticky-update",[d]),d.currentTop===d.topSpacing&&d.currentTop>m||null===d.currentTop&&m<d.topSpacing?d.stickyElement.trigger("sticky-bottom-reached",[d]):null!==d.currentTop&&m===d.topSpacing&&d.currentTop<m&&d.stickyElement.trigger("sticky-bottom-unreached",[d]),d.currentTop=m}}}},c=function(){o=i.height();for(var t=0,n=s.length;t<n;t++){var a=s[t],l=null;a.getWidthFrom?a.responsiveWidth&&(l=e(a.getWidthFrom).width()):a.widthFromWrapper&&(l=a.stickyWrapper.width()),null!=l&&a.stickyElement.css("width",l)}},p={init:function(t){var n=e.extend({},a,t);return this.each(function(){var t=e(this),i=t.attr("id"),l=t.outerHeight(),o=i?i+"-"+a.wrapperClassName:a.wrapperClassName,r=e("<div></div>").attr("id",o).addClass(n.wrapperClassName);t.wrapAll(r);var c=t.parent();n.center&&c.css({width:t.outerWidth(),marginLeft:"auto",marginRight:"auto"}),"right"===t.css("float")&&t.css({"float":"none"}).parent().css({"float":"right"}),c.css("height",l),n.stickyElement=t,n.stickyWrapper=c,n.currentTop=null,s.push(n)})},update:r,unstick:function(t){return this.each(function(){for(var t=this,a=e(t),i=-1,l=s.length;l-- >0;)s[l].stickyElement.get(0)===t&&(n.call(s,l,1),i=l);i!==-1&&(a.unwrap(),a.css({width:"",position:"",top:"","float":""}))})}};window.addEventListener?(window.addEventListener("scroll",r,!1),window.addEventListener("resize",c,!1)):window.attachEvent&&(window.attachEvent("onscroll",r),window.attachEvent("onresize",c)),e.fn.sticky=function(n){return p[n]?p[n].apply(this,t.call(arguments,1)):"object"!=typeof n&&n?void e.error("Method "+n+" does not exist on jQuery.sticky"):p.init.apply(this,arguments)},e.fn.unstick=function(n){return p[n]?p[n].apply(this,t.call(arguments,1)):"object"!=typeof n&&n?void e.error("Method "+n+" does not exist on jQuery.sticky"):p.unstick.apply(this,arguments)},e(function(){setTimeout(r,0)})}),this.IHD=this.IHD||{},this.IHD.templates=this.IHD.templates||{},this.IHD.templates.portfolio=Handlebars.template({1:function(e,t,n,a,i,l,s){var o;return'      <div class="image-container">\n        '+(null!=(o=n.each.call(null!=t?t:{},null!=t?t.files:t,{name:"each",hash:{},fn:e.program(2,i,0,l,s),inverse:e.noop,data:i}))?o:"")+"\n      </div>\n"},2:function(e,t,n,a,i,l,s){var o=e.lambda,r=e.escapeExpression;return'<img src="'+r(o(null!=s[1]?s[1].portfolio_base_path:s[1],t))+"images/portfolio/"+r(o(t,t))+'" />'},4:function(e,t,n,a,i){return'          <span class="label label-default label-location">'+e.escapeExpression(e.lambda(t,t))+"</span>\n"},6:function(e,t,n,a,i){return'          <span class="label label-default label-code">'+e.escapeExpression(e.lambda(t,t))+"</span>\n"},8:function(e,t,n,a,i){return'          <span class="label label-default label-discipline">'+e.escapeExpression(e.lambda(t,t))+"</span>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,i,l,s){var o,r,c=null!=t?t:{},p=n.helperMissing,d="function",u=e.escapeExpression;return'<div class="portfolio-item" data-locations="'+u((r=null!=(r=n.serializedLocations||(null!=t?t.serializedLocations:t))?r:p,typeof r===d?r.call(c,{name:"serializedLocations",hash:{},data:i}):r))+'" data-codes="'+u((r=null!=(r=n.serializedCodes||(null!=t?t.serializedCodes:t))?r:p,typeof r===d?r.call(c,{name:"serializedCodes",hash:{},data:i}):r))+'" data-disciplines="'+u((r=null!=(r=n.serializedDisciplines||(null!=t?t.serializedDisciplines:t))?r:p,typeof r===d?r.call(c,{name:"serializedDisciplines",hash:{},data:i}):r))+'">\n  <div class="card">\n'+(null!=(o=n["if"].call(c,null!=(o=null!=t?t.files:t)?o.length:o,{name:"if",hash:{},fn:e.program(1,i,0,l,s),inverse:e.noop,data:i}))?o:"")+'\n    <div class="card-content">\n      <h2>'+u((r=null!=(r=n.title||(null!=t?t.title:t))?r:p,typeof r===d?r.call(c,{name:"title",hash:{},data:i}):r))+'</h2>\n      <p class="labels">\n'+(null!=(o=n.each.call(c,null!=t?t.locationNames:t,{name:"each",hash:{},fn:e.program(4,i,0,l,s),inverse:e.noop,data:i}))?o:"")+(null!=(o=n.each.call(c,null!=t?t.codeNames:t,{name:"each",hash:{},fn:e.program(6,i,0,l,s),inverse:e.noop,data:i}))?o:"")+(null!=(o=n.each.call(c,null!=t?t.disciplineNames:t,{name:"each",hash:{},fn:e.program(8,i,0,l,s),inverse:e.noop,data:i}))?o:"")+"      </p>\n    </div>\n  </div>\n</div>\n"},useData:!0,useDepths:!0}),this.IHD.templates.portfolio_filter_button=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:{},o=n.helperMissing,r="function",c=e.escapeExpression;return'<li data-location="'+c((l=null!=(l=n.location_code||(null!=t?t.location_code:t))?l:o,typeof l===r?l.call(s,{name:"location_code",hash:{},data:i}):l))+'">\n  <a class="flag flag-'+c((l=null!=(l=n.location_code||(null!=t?t.location_code:t))?l:o,typeof l===r?l.call(s,{name:"location_code",hash:{},data:i}):l))+'" data-toggle="tooltip" data-placement="top" title="'+c((l=null!=(l=n.location_name||(null!=t?t.location_name:t))?l:o,typeof l===r?l.call(s,{name:"location_name",hash:{},data:i}):l))+'">'+c((l=null!=(l=n.location_name||(null!=t?t.location_name:t))?l:o,typeof l===r?l.call(s,{name:"location_name",hash:{},data:i}):l))+"</a>\n</li>\n"},useData:!0}),this.IHD.templates.type_filter_button=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:{},o=n.helperMissing,r="function",c=e.escapeExpression;return'<li data-type="'+c((l=null!=(l=n.type_code||(null!=t?t.type_code:t))?l:o,typeof l===r?l.call(s,{name:"type_code",hash:{},data:i}):l))+'">\n  <a>'+c((l=null!=(l=n.type_name||(null!=t?t.type_name:t))?l:o,typeof l===r?l.call(s,{name:"type_name",hash:{},data:i}):l))+"</a>\n</li>\n"},useData:!0}),function(e,t,n){"use strict";var a=e("#porfolio_grid"),i=e('#portfolio_filters select[name="location"]'),l=e('#portfolio_filters select[name="discipline"]'),s=e('#portfolio_filters select[name="type"]');e("#portfolio_filters").sticky({topSpacing:50}),e.getJSON(n.base_path+"scripts/portfolio-data.json",function(o){var r=function(e){return Object.keys(e).map(function(t){return{id:t,text:e[t][n.lang]}})};i.select2({data:r(o.countries),minimumResultsForSearch:1/0,theme:"classic"}),l.select2({data:r(o.disciplines),minimumResultsForSearch:1/0,theme:"classic"}),s.select2({data:r(o.codes),minimumResultsForSearch:1/0,theme:"classic"});e.each(o.items,function(e,t){var i=void 0===t.disciplines?[]:t.disciplines.split(""),l=void 0===t.codes?[]:t.codes.split(""),s={portfolio_base_path:n.base_path,serializedLocations:JSON.stringify([t.country_en]),locationNames:[t["country_"+n.lang]],serializedDisciplines:JSON.stringify(i),disciplineNames:i.map(function(e){return o.disciplines[e][n.lang]}),serializedCodes:JSON.stringify(l),codeNames:l.map(function(e){return o.codes[e][n.lang]}),files:t.files,title:t["title_"+n.lang]};a.append(IHD.templates.portfolio(s))});var c=new t(a[0],{itemSelector:".portfolio-item"}),p=function(){var n,a=[],o=[],r=[];(n=i.val())&&"-1"!==n&&a.push(n),(n=l.val())&&"-1"!==n&&o.push(n),(n=s.val())&&"-1"!==n&&r.push(n),a.length+o.length+r.length>0?c.filter(function(t){var n=e(t);return!(null!==a&&_.intersection(n.data("locations"),a).length!==a.length||null!==o&&_.intersection(n.data("disciplines"),o).length!==o.length||null!==r&&_.intersection(n.data("codes"),r).length!==r.length)}):c.filter(t.ALL_ITEMS)};e("#portfolio_filters ").on("change","select",p)})}(jQuery,window.shuffle,portfolio_conf);